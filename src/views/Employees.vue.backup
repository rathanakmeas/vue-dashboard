<template>
  <div class="employees-container">
    <!-- Header -->
    <div class="header">
      <div class="header-content">
        <div class="title-section">
          <i class="pi pi-users" style="font-size: 2rem; color: #0288D1;"></i>
          <div>
            <h1>áž‚áŸ’ážšáž”áŸ‹áž‚áŸ’ážšáž„áž”áž»áž‚áŸ’áž‚áž›áž·áž€</h1>
            <p class="subtitle">áž‚áŸ’ážšáž”áŸ‹áž‚áŸ’ážšáž„áž”áž»áž‚áŸ’áž‚áž›áž·áž€ áž“áž·áž„áž”áž»áž‚áŸ’áž‚áž›áž·áž€áž˜áž“áŸ’áž‘áž¸ážšáž–áŸáž‘áŸ’áž™</p>
          </div>
        </div>
        <button class="add-btn" @click="openDialog()">
          <i class="pi pi-plus"></i> áž”áž“áŸ’ážáŸ‚áž˜áž”áž»áž‚áŸ’áž‚áž›áž·áž€
        </button>
      </div>
    </div>

    <!-- Employee Table -->
    <div class="table-container">
      <table class="simple-table">
        <thead>
          <tr>
            <th>ážšáž¼áž”áž—áž¶áž–</th>
            <th>ážˆáŸ’áž˜áŸ„áŸ‡</th>
            <th>ážŸáŸ’ážáž¶áž“áž—áž¶áž–</th>
            <th>áž‘áž¼ážšážŸáŸáž–áŸ’áž‘</th>
            <th>áž¢áŸŠáž¸áž˜áŸ‚áž›</th>
            <th>ážŸáž€áž˜áŸ’áž˜áž—áž¶áž–</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="employee in employees" :key="employee._id">
            <td>
              <div class="photo-cell">
                <img v-if="employee.photo" :src="`http://localhost:5000${employee.photo}`" alt="Photo" />
                <div v-else class="photo-placeholder">
                  <i class="pi pi-user"></i>
                </div>
              </div>
            </td>
            <td>
              <div class="name-cell">
                <div class="name-en">{{ employee.firstName }} {{ employee.lastName }}</div>
                <div class="name-kh" v-if="employee.khmerName">{{ employee.khmerName }}</div>
              </div>
            </td>
            <td>
              <span :class="['status-badge', employee.status || 'active']">
                {{ employee.status || 'Active' }}
              </span>
            </td>
            <td>{{ employee.phone || '-' }}</td>
            <td>{{ employee.email || '-' }}</td>
            <td>
              <div class="action-buttons">
                <button class="btn-icon view" @click="viewEmployee(employee._id)" title="áž˜áž¾áž›">
                  <i class="pi pi-eye"></i>
                </button>
                <button class="btn-icon edit" @click="editEmployee(employee)" title="áž€áŸ‚ážŸáž˜áŸ’ážšáž½áž›">
                  <i class="pi pi-pencil"></i>
                </button>
                <button class="btn-icon delete" @click="confirmDelete(employee)" title="áž›áž»áž”">
                  <i class="pi pi-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <div v-if="employees.length === 0" class="empty-state">
        <i class="pi pi-users" style="font-size: 4rem; color: #cbd5e1;"></i>
        <p>áž˜áž·áž“áž˜áž¶áž“áž”áž»áž‚áŸ’áž‚áž›áž·áž€</p>
      </div>
    </div>

    <!-- Add/Edit Modal -->
    <div v-if="dialogVisible" class="modal-overlay" @click.self="closeDialog">
      <div class="modal-content-large">
        <h3>{{ dialogMode === 'create' ? 'âž• áž€áŸ‚áž”áŸ’ážšáŸ‚áž–áŸážáŸŒáž˜áž¶áž“áž‘áž¼áž‘áŸ…áž•áŸ’áž‘áž¶áž›áŸ‹ážáŸ’áž›áž½áž“' : 'âœï¸ áž€áŸ‚áž”áŸ’ážšáŸ‚áž–áŸážáŸŒáž˜áž¶áž“áž‘áž¼áž‘áŸ…áž•áŸ’áž‘áž¶áž›áŸ‹ážáŸ’áž›áž½áž“' }}</h3>
        <form @submit.prevent="handleSubmit">
          <!-- Top Icon Navigation (TreeTab) -->
          <div class="top-icon-tabs">
            <button 
              type="button"
              v-for="(iconTab, idx) in iconTabs" 
              :key="idx"
              :class="['icon-tab', { active: activeIconTab === idx }]"
              @click="activeIconTab = idx"
            >
              <div class="icon-circle">
                <i :class="iconTab.icon"></i>
              </div>
              <span class="icon-label">{{ iconTab.label }}</span>
            </button>
          </div>

          <!-- Progress Bar -->
          <div class="progress-section">
            <div class="progress-bar-container">
              <div class="progress-bar" :style="{ width: progressPercentage + '%' }"></div>
            </div>
            <span class="progress-text">{{ progressPercentage }}% áž”áž¶áž“áž”áŸ†áž–áŸáž‰</span>
          </div>

          <!-- Tab Content -->
          <div class="form-content">
            <!-- Tab 0: Personal Information -->
            <div v-show="activeIconTab === 0">
            <!-- General Information Block -->
            <div class="form-block general-info-block">
              <div class="form-section-header">
                <i class="pi pi-user"></i>
                <h4>áž–áŸážáŸŒáž˜áž¶áž“áž‘áž¼áž‘áŸ…</h4>
              </div>
            
            <div class="general-info-layout">
              <!-- Photo Upload Section -->
              <div class="photo-upload-section">
                <div class="photo-preview">
                  <img v-if="formData.photo" :src="formData.photo" alt="Photo" />
                  <div v-else class="photo-placeholder">
                    <i class="pi pi-user"></i>
                  </div>
                </div>
                <div class="photo-buttons">
                  <button type="button" class="btn-photo upload">áž”áž‰áŸ’áž…áž¼áž›</button>
                  <button type="button" class="btn-photo delete">áž›áž»áž”</button>
                </div>
              </div>

              <!-- Form Fields Next to Photo -->
              <div class="general-info-fields">
                <div class="form-row">
                  <div class="form-group">
                    <label>áž›áŸážážŸáŸ†áž”áž»ážáŸ’ážšáž€áŸ†ážŽáž¾áž</label>
                    <input v-model="formData.birthCertificateNo" type="text" placeholder="áž›áŸážážŸáŸ†áž”áž»ážáŸ’ážšáž€áŸ†ážŽáž¾áž" />
                  </div>
                  <div class="form-group">
                    <label>áž›áŸážážŸáž˜áŸ’áž‚áž¶áž›áŸ‹áž”áž»áž‚áŸ’áž‚áž›áž·áž€ <span class="required">*</span></label>
                    <input v-model="formData.employeeId" type="text" placeholder="áž›áŸážážŸáž˜áŸ’áž‚áž¶áž›áŸ‹áž”áž»áž‚áŸ’áž‚áž›áž·áž€" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž›áŸážáž¢ážáŸ’ážážŸáž‰áŸ’áž‰áž¶ážŽáž”áŸážŽáŸ’ážŽážŸáž‰áŸ’áž‡áž¶ážáž·ážáŸ’áž˜áŸ‚ážš <span class="required">*</span></label>
                    <input v-model="formData.nationalIdNo" type="text" placeholder="010654986" />
                  </div>
                  <div class="form-group">
                    <label>ážŸáž»áž–áž›áž—áž¶áž–áž¢ážáŸ’ážážŸáž‰áŸ’áž‰áž¶ážŽáž”áŸážŽáŸ’ážŽ <span class="required">*</span></label>
                    <input v-model="formData.idValidFrom" type="date" placeholder="30/03/2016" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>ážáŸ’áž„áŸƒáž•áž»ážážŸáž»áž–áž›áž—áž¶áž–áž¢ážáŸ’ážážŸáž‰áŸ’áž‰áž¶ážŽáž”áŸážŽáŸ’ážŽ <span class="required">*</span></label>
                    <input v-model="formData.idExpiryDate" type="date" placeholder="29/03/2026" />
                  </div>
                  <div class="form-group">
                    <label>áž›áŸážáž›áž·ážáž·ážáž†áŸ’áž›áž„ážŠáŸ‚áž“</label>
                    <input v-model="formData.passportNo" type="text" placeholder="áž›áŸážáž›áž·ážáž·ážáž†áŸ’áž›áž„ážŠáŸ‚áž“" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž¢ážáŸ’ážáž›áŸážáž˜áž“áŸ’ážáŸ’ážšáž¸ážšáž¶áž‡áž€áž¶ážš</label>
                    <input v-model="formData.civilServantId" type="text" placeholder="áž¢ážáŸ’ážáž›áŸážáž˜áž“áŸ’ážáŸ’ážšáž¸ážšáž¶áž‡áž€áž¶ážš" />
                  </div>
                  <div class="form-group">
                    <label>áž‚áŸ„ážáŸ’ážáž“áž¶áž˜ <span class="required">*</span></label>
                    <input v-model="formData.khmerSurname" type="text" placeholder="áž‚áŸ„ážáŸ’ážáž“áž¶áž˜" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž“áž¶áž˜ážáŸ’áž›áž½áž“ <span class="required">*</span></label>
                    <input v-model="formData.khmerGivenName" type="text" placeholder="áž“áž¶áž˜ážáŸ’áž›áž½áž“" />
                  </div>
                  <div class="form-group">
                    <label>ážŸáž‰áŸ’áž‡áž¶ážáž· <span class="required">*</span></label>
                    <select v-model="formData.citizenship">
                      <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                      <option value="khmer">ážáŸ’áž˜áŸ‚ážš</option>
                      <option value="foreigner">áž”ážšáž‘áŸážŸ</option>
                    </select>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž‚áŸ„ážáŸ’ážáž“áž¶áž˜áž¡áž¶ážáž¶áŸ†áž„</label>
                    <input v-model="formData.latinSurname" type="text" placeholder="Surname" />
                  </div>
                  <div class="form-group">
                    <label>áž“áž¶áž˜áž¡áž¶ážáž¶áŸ†áž„</label>
                    <input v-model="formData.latinGivenName" type="text" placeholder="Given Name" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž‡áž“áž‡áž¶ážáž· <span class="required">*</span></label>
                    <select v-model="formData.ethnicity">
                      <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                      <option value="khmer">ážáŸ’áž˜áŸ‚ážš</option>
                      <option value="chinese">áž…áž·áž“</option>
                      <option value="vietnamese">ážœáŸ€ážážŽáž¶áž˜</option>
                      <option value="cham">áž…áž¶áž˜</option>
                      <option value="other">áž•áŸ’ážŸáŸáž„áŸ—</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>áž—áŸáž‘ <span class="required">*</span></label>
                    <div class="radio-group">
                      <label class="radio-label">
                        <input type="radio" v-model="formData.gender" value="male" />
                        <span>áž”áŸ’ážšáž»ážŸ</span>
                      </label>
                      <label class="radio-label">
                        <input type="radio" v-model="formData.gender" value="female" />
                        <span>ážŸáŸ’ážšáž¸</span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Full width fields in general info block -->
            <div class="form-row">
              <div class="form-group">
                <label>ážáŸ’áž„áŸƒážáŸ‚áž†áŸ’áž“áž¶áŸ†áž€áŸ†ážŽáž¾áž <span class="required">*</span></label>
                <div class="date-picker-group">
                  <select v-model="formData.birthDay" class="date-select">
                    <option value="">ážáŸ’áž„áŸƒ</option>
                    <option v-for="day in 31" :key="day" :value="day">{{ day }}</option>
                  </select>
                  <select v-model="formData.birthMonth" class="date-select">
                    <option value="">ážáŸ‚</option>
                    <option value="1">áž˜áž€ážšáž¶</option>
                    <option value="2">áž€áž»áž˜áŸ’áž—áŸˆ</option>
                    <option value="3">áž˜áž¸áž“áž¶</option>
                    <option value="4">áž˜áŸážŸáž¶</option>
                    <option value="5">áž§ážŸáž—áž¶</option>
                    <option value="6">áž˜áž·ážáž»áž“áž¶</option>
                    <option value="7">áž€áž€áŸ’áž€ážŠáž¶</option>
                    <option value="8">ážŸáž¸áž áž¶</option>
                    <option value="9">áž€áž‰áŸ’áž‰áž¶</option>
                    <option value="10">ážáž»áž›áž¶</option>
                    <option value="11">ážœáž·áž…áŸ’áž†áž·áž€áž¶</option>
                    <option value="12">áž’áŸ’áž“áž¼</option>
                  </select>
                  <select v-model="formData.birthYear" class="date-select">
                    <option value="">áž†áŸ’áž“áž¶áŸ†</option>
                    <option v-for="year in 100" :key="year" :value="2026 - year">{{ 2026 - year }}</option>
                  </select>
                </div>
              </div>
              <div class="form-group">
                <label>áž”áŸ’ážšáž—áŸáž‘ážˆáž¶áž˜</label>
                <select v-model="formData.bloodType">
                  <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                  <option value="A+">A+</option>
                  <option value="A-">Aâˆ’</option>
                  <option value="B+">B+</option>
                  <option value="B-">Bâˆ’</option>
                  <option value="AB+">AB+</option>
                  <option value="AB-">ABâˆ’</option>
                  <option value="O+">O+</option>
                  <option value="O-">Oâˆ’</option>
                </select>
              </div>
              <div class="form-group">
                <label>ážŸáŸ’ážáž¶áž“áž—áž¶áž–áž‚áŸ’ážšáž½ážŸáž¶ážš <span class="required">*</span></label>
                <select v-model="formData.maritalStatus">
                  <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                  <option value="single">áž“áŸ…áž›áž¸ážœ</option>
                  <option value="married">ážšáŸ€áž”áž€áž¶ážš</option>
                  <option value="divorced">áž›áŸ‚áž„áž›áŸ‡</option>
                  <option value="widowed">áž˜áŸáž˜áŸ‰áž¶áž™/áž”áŸ’ážáž¸</option>
                </select>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>áž›áŸážáž‘áž¼ážšážŸáŸáž–áŸ’áž‘áž‘áž¸áŸ¡ <span class="required">*</span></label>
                <input v-model="formData.phone1" type="tel" placeholder="+855 12 345 678" />
              </div>
              <div class="form-group">
                <label>áž›áŸážáž‘áž¼ážšážŸáŸáž–áŸ’áž‘áž‘áž¸áŸ¢</label>
                <input v-model="formData.phone2" type="tel" placeholder="+855 12 345 678" />
              </div>
              <div class="form-group">
                <label>áž¢áŸŠáž¸áž˜áŸ‰áŸ‚áž›</label>
                <input v-model="formData.email" type="email" placeholder="email@example.com" />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group full-width">
                <label>áž€áž¶áž™ážŸáž˜áŸ’áž”áž‘áž¶</label>
                <textarea v-model="formData.physicalAttributes" rows="2" placeholder="áž€áž˜áŸ’áž–ážŸáŸ‹, áž‘áž˜áŸ’áž„áž“áŸ‹, áž“áž·áž„áž›áž€áŸ’ážážŽáŸˆáž€áž¶áž™ážŸáž˜áŸ’áž”áž‘áž¶áž•áŸ’ážŸáŸáž„áŸ—"></textarea>
              </div>
            </div>
            </div>

            <!-- Birth Place Block -->
            <div class="form-block birthplace-block">
              <div class="form-section-header">
                <i class="pi pi-map-marker"></i>
                <h4>áž‘áž¸áž€áž“áŸ’áž›áŸ‚áž„áž€áŸ†ážŽáž¾áž</h4>
              </div>
            <div class="form-row">
              <div class="form-group">
                <label>ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž</label>
                <input v-model="formData.birthProvince" type="text" placeholder="ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž" />
              </div>
              <div class="form-group">
                <label>ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ</label>
                <input v-model="formData.birthDistrict" type="text" placeholder="ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ" />
              </div>
              <div class="form-group">
                <label>ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹</label>
                <input v-model="formData.birthCommune" type="text" placeholder="ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹" />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>áž—áž¼áž˜áž·</label>
                <input v-model="formData.birthVillage" type="text" placeholder="áž—áž¼áž˜áž·" />
              </div>
              <div class="form-group">
                <label>áž•áŸ’áž‘áŸ‡áž›áŸáž</label>
                <input v-model="formData.birthHouseNumber" type="text" placeholder="áž•áŸ’áž‘áŸ‡áž›áŸáž" />
              </div>
              <div class="form-group">
                <label>áž•áŸ’áž›áž¼ážœáž›áŸáž</label>
                <input v-model="formData.birthStreetNumber" type="text" placeholder="áž•áŸ’áž›áž¼ážœáž›áŸáž" />
              </div>
            </div>
            </div>

            <!-- Current Address Block -->
            <div class="form-block address-block">
              <div class="form-section-header">
                <i class="pi pi-home"></i>
                <h4>áž¢áž¶ážŸáž™ážŠáŸ’áž‹áž¶áž“</h4>
              </div>
            <div class="form-row">
              <div class="form-group">
                <label>ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž</label>
                <input v-model="formData.addressProvince" type="text" placeholder="ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž" />
              </div>
              <div class="form-group">
                <label>ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ</label>
                <input v-model="formData.addressDistrict" type="text" placeholder="ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ" />
              </div>
              <div class="form-group">
                <label>ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹</label>
                <input v-model="formData.addressCommune" type="text" placeholder="ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹" />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>áž—áž¼áž˜áž·</label>
                <input v-model="formData.addressVillage" type="text" placeholder="áž—áž¼áž˜áž·" />
              </div>
              <div class="form-group">
                <label>áž•áŸ’áž‘áŸ‡áž›áŸáž</label>
                <input v-model="formData.addressHouseNumber" type="text" placeholder="áž•áŸ’áž‘áŸ‡áž›áŸáž" />
              </div>
              <div class="form-group">
                <label>áž•áŸ’áž›áž¼ážœáž›áŸáž</label>
                <input v-model="formData.addressStreetNumber" type="text" placeholder="áž•áŸ’áž›áž¼ážœáž›áŸáž" />
              </div>
            </div>
            </div>

            <!-- Emergency Contact Block -->
            <div class="form-block emergency-block">
              <div class="form-section-header">
                <i class="pi pi-phone"></i>
                <h4>áž–áŸážáŸŒáž˜áž¶áž“áž‘áŸ†áž“áž¶áž€áŸ‹áž‘áŸ†áž“áž„áž€áŸ’áž“áž»áž„áž€ážšážŽáž¸áž˜áž¶áž“áž¢áž¶ážŸáž“áŸ’áž“</h4>
              </div>
            <div class="form-row">
              <div class="form-group">
                <label>áž‚áŸ„ážáŸ’ážáž“áž¶áž˜</label>
                <input v-model="formData.emergencySurname" type="text" placeholder="áž‚áŸ„ážáŸ’ážáž“áž¶áž˜" />
              </div>
              <div class="form-group">
                <label>áž“áž¶áž˜ážáŸ’áž›áž½áž“</label>
                <input v-model="formData.emergencyGivenName" type="text" placeholder="áž“áž¶áž˜ážáŸ’áž›áž½áž“" />
              </div>
              <div class="form-group">
                <label>áž—áŸáž‘</label>
                <div class="radio-group">
                  <label class="radio-label">
                    <input type="radio" v-model="formData.emergencyGender" value="male" />
                    <span>áž”áŸ’ážšáž»ážŸ</span>
                  </label>
                  <label class="radio-label">
                    <input type="radio" v-model="formData.emergencyGender" value="female" />
                    <span>ážŸáŸ’ážšáž¸</span>
                  </label>
                </div>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>áž‘áŸ†áž“áž¶áž€áŸ‹áž‘áŸ†áž“áž„ážáŸ’ážšáž¼ážœáž‡áž¶</label>
                <select v-model="formData.emergencyRelationship">
                  <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                  <option value="parent">ážªáž–áž»áž€/áž˜áŸ’ážáž¶áž™</option>
                  <option value="spouse">áž”áŸ’ážáž¸/áž”áŸ’ážšáž–áž“áŸ’áž’</option>
                  <option value="sibling">áž”áž„áž”áŸ’áž¢áž¼áž“</option>
                  <option value="child">áž€áž¼áž“</option>
                  <option value="relative">ážŸáž¶áž…áŸ‹áž‰áž¶ážáž·</option>
                  <option value="friend">áž˜áž·ážáŸ’ážáž—áž€áŸ’ážáž·</option>
                  <option value="other">áž•áŸ’ážŸáŸáž„áŸ—</option>
                </select>
              </div>
              <div class="form-group">
                <label>áž˜áž»ážážšáž”ážš</label>
                <select v-model="formData.emergencyOccupation">
                  <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                  <option value="civil-servant">áž˜áž“áŸ’ážáŸ’ážšáž¸ážšáž¶áž‡áž€áž¶ážš</option>
                  <option value="teacher">áž‚áŸ’ážšáž¼áž”áž„áŸ’ážšáŸ€áž“</option>
                  <option value="doctor">áž‚áŸ’ážšáž¼áž–áŸáž‘áŸ’áž™</option>
                  <option value="business">áž¢áŸ’áž“áž€áž‡áŸ†áž“áž½áž‰</option>
                  <option value="farmer">áž€ážŸáž·áž€ážš</option>
                  <option value="worker">áž€áž˜áŸ’áž˜áž€ážš</option>
                  <option value="student">áž“áž·ážŸáŸ’ážŸáž·áž</option>
                  <option value="retired">ážšáž¶áž‡áž€áž¶ážšáž“áž·ážœážáŸ’áž</option>
                  <option value="unemployed">áž‚áŸ’áž˜áž¶áž“áž€áž¶ážšáž„áž¶ážš</option>
                  <option value="other">áž•áŸ’ážŸáŸáž„áŸ—</option>
                </select>
              </div>
              <div class="form-group">
                <label>ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž</label>
                <input v-model="formData.emergencyProvince" type="text" placeholder="ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž" />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ</label>
                <input v-model="formData.emergencyDistrict" type="text" placeholder="ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ" />
              </div>
              <div class="form-group">
                <label>ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹</label>
                <input v-model="formData.emergencyCommune" type="text" placeholder="ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹" />
              </div>
              <div class="form-group">
                <label>áž—áž¼áž˜áž·</label>
                <input v-model="formData.emergencyVillage" type="text" placeholder="áž—áž¼áž˜áž·" />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>áž•áŸ’áž‘áŸ‡áž›áŸáž</label>
                <input v-model="formData.emergencyHouseNumber" type="text" placeholder="áž•áŸ’áž‘áŸ‡áž›áŸáž" />
              </div>
              <div class="form-group">
                <label>áž•áŸ’áž›áž¼ážœáž›áŸáž</label>
                <input v-model="formData.emergencyStreetNumber" type="text" placeholder="áž•áŸ’áž›áž¼ážœáž›áŸáž" />
              </div>
              <div class="form-group">
                <label>áž›áŸážáž‘áž¼ážšážŸáŸáž–áŸ’áž‘</label>
                <input v-model="formData.emergencyPhone" type="tel" placeholder="+855 12 345 678" />
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>áž¢áŸŠáž¸áž˜áŸ‰áŸ‚áž›</label>
                <input v-model="formData.emergencyEmail" type="email" placeholder="email@example.com" />
              </div>
            </div>
            </div>
            </div>

            <!-- Tab 1: Parent Information -->
            <div v-show="activeIconTab === 1">
              <!-- Father Information Block -->
              <div class="form-block general-info-block">
                <div class="form-section-header">
                  <i class="pi pi-user"></i>
                  <h4>áž–áŸážáŸŒáž˜áž¶áž“ážªáž–áž»áž€</h4>
                </div>
                
                <div class="form-row">
                  <div class="form-group">
                    <label>áž‚áŸ„ážáŸ’ážáž“áž¶áž˜ áž“áž·áž„áž“áž¶áž˜</label>
                    <input v-model="formData.fatherName" type="text" placeholder="áž‚áŸ„ážáŸ’ážáž“áž¶áž˜ áž“áž·áž„áž“áž¶áž˜" />
                  </div>
                  <div class="form-group">
                    <label>áž‚áŸ„ážáŸ’ážáž“áž¶áž˜ áž“áž·áž„áž“áž¶áž˜áž¡áž¶ážáž¶áŸ†áž„</label>
                    <input v-model="formData.fatherLatinName" type="text" placeholder="PALV RATHOERN" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>ážáŸ’áž„áŸƒážáŸ‚áž†áŸ’áž“áž¶áŸ†áž€áŸ†ážŽáž¾áž</label>
                    <div class="date-picker-group">
                      <select v-model="formData.fatherBirthDay" class="date-select">
                        <option value="">ážáŸ’áž„áŸƒ</option>
                        <option v-for="day in 31" :key="day" :value="day">{{ day }}</option>
                      </select>
                      <select v-model="formData.fatherBirthMonth" class="date-select">
                        <option value="">ážáŸ‚</option>
                        <option value="1">áž˜áž€ážšáž¶</option>
                        <option value="2">áž€áž»áž˜áŸ’áž—áŸˆ</option>
                        <option value="3">áž˜áž¸áž“áž¶</option>
                        <option value="4">áž˜áŸážŸáž¶</option>
                        <option value="5">áž§ážŸáž—áž¶</option>
                        <option value="6">áž˜áž·ážáž»áž“áž¶</option>
                        <option value="7">áž€áž€áŸ’áž€ážŠáž¶</option>
                        <option value="8">ážŸáž¸áž áž¶</option>
                        <option value="9">áž€áž‰áŸ’áž‰áž¶</option>
                        <option value="10">ážáž»áž›áž¶</option>
                        <option value="11">ážœáž·áž…áŸ’áž†áž·áž€áž¶</option>
                        <option value="12">áž’áŸ’áž“áž¼</option>
                      </select>
                      <select v-model="formData.fatherBirthYear" class="date-select">
                        <option value="">áž†áŸ’áž“áž¶áŸ†</option>
                        <option v-for="year in 100" :key="year" :value="2026 - year">{{ 2026 - year }}</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <label>ážŸáŸ’ážáž¶áž“áž—áž¶áž–</label>
                    <div class="radio-group">
                      <label class="radio-label">
                        <input type="radio" v-model="formData.fatherStatus" value="alive" />
                        <span>ážšážŸáŸ‹</span>
                      </label>
                      <label class="radio-label">
                        <input type="radio" v-model="formData.fatherStatus" value="deceased" />
                        <span>ážŸáŸ’áž›áž¶áž”áŸ‹</span>
                      </label>
                    </div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž‡áž“áž‡áž¶ážáž·</label>
                    <select v-model="formData.fatherEthnicity">
                      <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                      <option value="khmer">ážáŸ’áž˜áŸ‚ážš</option>
                      <option value="chinese">áž…áž·áž“</option>
                      <option value="vietnamese">ážœáŸ€ážážŽáž¶áž˜</option>
                      <option value="cham">áž…áž¶áž˜</option>
                      <option value="other">áž•áŸ’ážŸáŸáž„áŸ—</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>ážŸáž‰áŸ’áž‡áž¶ážáž·</label>
                    <select v-model="formData.fatherNationality">
                      <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                      <option value="khmer">ážáŸ’áž˜áŸ‚ážš</option>
                      <option value="foreigner">áž”ážšáž‘áŸážŸ</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>áž˜áž»ážážšáž”ážš</label>
                    <select v-model="formData.fatherOccupation">
                      <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                      <option value="civil-servant">áž˜áž“áŸ’ážáŸ’ážšáž¸ážšáž¶áž‡áž€áž¶ážš</option>
                      <option value="teacher">áž‚áŸ’ážšáž¼áž”áž„áŸ’ážšáŸ€áž“</option>
                      <option value="professor">ážŸáž¶ážŸáŸ’ážáŸ’ážšáž¶áž…áž¶ážšáŸ’áž™áž˜áž áž¶áž”ážšáž·áž‰áŸ’áž‰áž¶</option>
                      <option value="associate-professor">ážŸáž¶ážŸáŸ’ážŠáŸ’ážšáž¶áž…áž¶ážšáŸ’áž™ážšáž„</option>
                      <option value="assistant-professor">ážŸáž¶ážŸáŸ’ážŠáŸ’ážšáž¶áž…áž¶ážšáŸ’áž™áž‡áŸ†áž“áž½áž™</option>
                      <option value="medical-specialist">ážœáŸáž‡áŸ’áž‡áž”ážŽáŸ’ážáž·ážáž¯áž€áž‘áŸážŸ</option>
                      <option value="medical-master">ážœáŸáž‡áŸ’áž‡áž”ážŽáŸ’ážáž·áž(áž‡áŸ†áž“áž¶áž‰/áž¢áž“áž»áž”ážŽáŸ’ážŒáž·áž)</option>
                      <option value="medical-doctor">ážœáŸáž‡áŸ’áž‡áž”ážŽáŸ’ážŒáž·áž</option>
                      <option value="dentist">áž‘áž“áŸ’ážŠáž”ážŽáŸ’ážŒáž·áž</option>
                      <option value="pharmacist">áž±ážŸážáž€áž¶ážšáž¸</option>
                      <option value="nurse-bachelor">áž‚áž·áž›áž¶áž“áž»áž”ážŠáŸ’áž‹áž¶áž€(áž”ážšáž·áž‰áŸ’áž‰áž¶áž”ážáŸ’ážš)</option>
                      <option value="midwife-bachelor">áž†áŸ’áž˜áž”(áž”ážšáž·áž‰áŸ’áž‰áž¶áž”ážáŸ’ážš)</option>
                      <option value="nurse-secondary">áž‚áž·áž›áž¶áž“áž»áž”ážŠáŸ’áž‹áž¶áž€áž˜áž’áŸ’áž™áž˜</option>
                      <option value="midwife-secondary">áž†áŸ’áž˜áž”áž˜áž’áŸ’áž™áž˜</option>
                      <option value="nurse-primary">áž‚áž·áž›áž¶áž“áž»áž”ážŠáŸ’áž‹áž¶áž€áž”áž‹áž˜</option>
                      <option value="dental-nurse">áž‘áž“áŸ’ážáž‚áž·áž›áž¶áž“áž»áž”ážŠáŸ’áž‹áž¶áž€áž˜áž’áŸ’áž™áž˜</option>
                      <option value="lab-technician">áž¢áŸ’áž“áž€áž”áž…áŸ’áž…áŸáž€áž‘áŸážŸáž˜áž“áŸ’áž‘áž¸ážšáž–áž·ážŸáŸ„áž’áž“áŸáž˜áž’áŸ’áž™áž˜</option>
                      <option value="radiologist">áž¢áŸ’áž“áž€áž”áž…áŸ’áž…áŸáž€áž‘áŸážŸážœáž·áž‘áŸ’áž™áž»ážŸáž¶ážŸáŸ’ážšáŸ’áž</option>
                      <option value="physiotherapist">áž–áŸ’áž™áž¶áž”áž¶áž›ážŠáŸ„áž™áž…áž›áž“áž¶áž˜áž’áŸ’áž™áž˜</option>
                      <option value="it-specialist">áž–áŸážáŸŒáž˜áž¶áž“ážœáž·áž‘áŸ’áž™áž¶</option>
                      <option value="accountant">áž‚ážŽáž“áŸáž™áŸ’áž™áž€ážš</option>
                      <option value="public-admin">ážšážŠáŸ’áž‹áž”áž¶áž›â€‹ážŸáž¶áž’áž¶ážšážŽáŸˆ</option>
                      <option value="electrical-engineer">ážœáž·ážŸáŸ’ážœáž€áž˜áŸ’áž˜áž¢áž‚áŸ’áž‚áž·ážŸáž“áž¸</option>
                      <option value="business">áž¢áž¶áž‡áž¸ážœáž€</option>
                      <option value="trader">áž›áž€áŸ‹ážŠáž¼ážš</option>
                      <option value="caregiver">áž¢áŸ’áž“áž€ážáŸ‚áž‘áž¶áŸ†</option>
                      <option value="mid-doctor">áž‚áŸ’ážšáž¼áž–áŸáž‘áŸ’áž™áž˜áž’áŸ’áž™áž˜</option>
                      <option value="farmer">áž€ážŸáž·áž€ážš</option>
                      <option value="worker">áž€áž˜áŸ’áž˜áž€ážš</option>
                      <option value="student">áž“áž·ážŸáŸ’ážŸáž·áž</option>
                      <option value="retired">ážšáž¶áž‡áž€áž¶ážšáž“áž·ážœážáŸ’áž</option>
                      <option value="unemployed">áž‚áŸ’áž˜áž¶áž“áž€áž¶ážšáž„áž¶ážš</option>
                      <option value="housewife">áž˜áŸáž•áŸ’áž‘áŸ‡</option>
                      <option value="other">áž•áŸ’ážŸáŸáž„áŸ—</option>
                    </select>
                  </div>
                </div>

                <div class="subsection-title">áž‘áž¸áž€áž“áŸ’áž›áŸ‚áž„áž€áŸ†ážŽáž¾ážážªáž–áž»áž€</div>

                <div class="form-row">
                  <div class="form-group">
                    <label>ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž</label>
                    <input v-model="formData.fatherBirthProvince" type="text" placeholder="ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž" />
                  </div>
                  <div class="form-group">
                    <label>ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ</label>
                    <input v-model="formData.fatherBirthDistrict" type="text" placeholder="ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ" />
                  </div>
                  <div class="form-group">
                    <label>ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹</label>
                    <input v-model="formData.fatherBirthCommune" type="text" placeholder="ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž—áž¼áž˜áž·</label>
                    <input v-model="formData.fatherBirthVillage" type="text" placeholder="áž—áž¼áž˜áž·" />
                  </div>
                  <div class="form-group">
                    <label>áž•áŸ’áž‘áŸ‡áž›áŸáž</label>
                    <input v-model="formData.fatherBirthHouseNumber" type="text" placeholder="áž•áŸ’áž‘áŸ‡áž›áŸáž" />
                  </div>
                  <div class="form-group">
                    <label>áž•áŸ’áž›áž¼ážœáž›áŸáž</label>
                    <input v-model="formData.fatherBirthStreetNumber" type="text" placeholder="áž•áŸ’áž›áž¼ážœáž›áŸáž" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž›áŸážáž‘áž¼ážšážŸáŸáž–áŸ’áž‘</label>
                    <input v-model="formData.fatherPhone" type="tel" placeholder="+855 12 345 678" />
                  </div>
                </div>
              </div>

              <!-- Mother Information Block -->
              <div class="form-block birthplace-block">
                <div class="form-section-header">
                  <i class="pi pi-user"></i>
                  <h4>áž–áŸážáŸŒáž˜áž¶áž“áž˜áŸ’ážáž¶áž™</h4>
                </div>
                
                <div class="form-row">
                  <div class="form-group">
                    <label>áž‚áŸ„ážáŸ’ážáž“áž¶áž˜ áž“áž·áž„áž“áž¶áž˜</label>
                    <input v-model="formData.motherName" type="text" placeholder="áž‚áŸ„ážáŸ’ážáž“áž¶áž˜ áž“áž·áž„áž“áž¶áž˜" />
                  </div>
                  <div class="form-group">
                    <label>áž‚áŸ„ážáŸ’ážáž“áž¶áž˜ áž“áž·áž„áž“áž¶áž˜áž¡áž¶ážáž¶áŸ†áž„</label>
                    <input v-model="formData.motherLatinName" type="text" placeholder="Latin Name" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>ážáŸ’áž„áŸƒážáŸ‚áž†áŸ’áž“áž¶áŸ†áž€áŸ†ážŽáž¾áž</label>
                    <div class="date-picker-group">
                      <select v-model="formData.motherBirthDay" class="date-select">
                        <option value="">ážáŸ’áž„áŸƒ</option>
                        <option v-for="day in 31" :key="day" :value="day">{{ day }}</option>
                      </select>
                      <select v-model="formData.motherBirthMonth" class="date-select">
                        <option value="">ážáŸ‚</option>
                        <option value="1">áž˜áž€ážšáž¶</option>
                        <option value="2">áž€áž»áž˜áŸ’áž—áŸˆ</option>
                        <option value="3">áž˜áž¸áž“áž¶</option>
                        <option value="4">áž˜áŸážŸáž¶</option>
                        <option value="5">áž§ážŸáž—áž¶</option>
                        <option value="6">áž˜áž·ážáž»áž“áž¶</option>
                        <option value="7">áž€áž€áŸ’áž€ážŠáž¶</option>
                        <option value="8">ážŸáž¸áž áž¶</option>
                        <option value="9">áž€áž‰áŸ’áž‰áž¶</option>
                        <option value="10">ážáž»áž›áž¶</option>
                        <option value="11">ážœáž·áž…áŸ’áž†áž·áž€áž¶</option>
                        <option value="12">áž’áŸ’áž“áž¼</option>
                      </select>
                      <select v-model="formData.motherBirthYear" class="date-select">
                        <option value="">áž†áŸ’áž“áž¶áŸ†</option>
                        <option v-for="year in 100" :key="year" :value="2026 - year">{{ 2026 - year }}</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <label>ážŸáŸ’ážáž¶áž“áž—áž¶áž–</label>
                    <div class="radio-group">
                      <label class="radio-label">
                        <input type="radio" v-model="formData.motherStatus" value="alive" />
                        <span>ážšážŸáŸ‹</span>
                      </label>
                      <label class="radio-label">
                        <input type="radio" v-model="formData.motherStatus" value="deceased" />
                        <span>ážŸáŸ’áž›áž¶áž”áŸ‹</span>
                      </label>
                    </div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž‡áž“áž‡áž¶ážáž·</label>
                    <select v-model="formData.motherEthnicity">
                      <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                      <option value="khmer">ážáŸ’áž˜áŸ‚ážš</option>
                      <option value="chinese">áž…áž·áž“</option>
                      <option value="vietnamese">ážœáŸ€ážážŽáž¶áž˜</option>
                      <option value="cham">áž…áž¶áž˜</option>
                      <option value="other">áž•áŸ’ážŸáŸáž„áŸ—</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>ážŸáž‰áŸ’áž‡áž¶ážáž·</label>
                    <select v-model="formData.motherNationality">
                      <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                      <option value="khmer">ážáŸ’áž˜áŸ‚ážš</option>
                      <option value="foreigner">áž”ážšáž‘áŸážŸ</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>áž˜áž»ážážšáž”ážš</label>
                    <select v-model="formData.motherOccupation">
                      <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                      <option value="civil-servant">áž˜áž“áŸ’ážáŸ’ážšáž¸ážšáž¶áž‡áž€áž¶ážš</option>
                      <option value="teacher">áž‚áŸ’ážšáž¼áž”áž„áŸ’ážšáŸ€áž“</option>
                      <option value="professor">ážŸáž¶ážŸáŸ’ážáŸ’ážšáž¶áž…áž¶ážšáŸ’áž™áž˜áž áž¶áž”ážšáž·áž‰áŸ’áž‰áž¶</option>
                      <option value="associate-professor">ážŸáž¶ážŸáŸ’ážŠáŸ’ážšáž¶áž…áž¶ážšáŸ’áž™ážšáž„</option>
                      <option value="assistant-professor">ážŸáž¶ážŸáŸ’ážŠáŸ’ážšáž¶áž…áž¶ážšáŸ’áž™áž‡áŸ†áž“áž½áž™</option>
                      <option value="medical-specialist">ážœáŸáž‡áŸ’áž‡áž”ážŽáŸ’ážáž·ážáž¯áž€áž‘áŸážŸ</option>
                      <option value="medical-master">ážœáŸáž‡áŸ’áž‡áž”ážŽáŸ’ážáž·áž(áž‡áŸ†áž“áž¶áž‰/áž¢áž“áž»áž”ážŽáŸ’ážŒáž·áž)</option>
                      <option value="medical-doctor">ážœáŸáž‡áŸ’áž‡áž”ážŽáŸ’ážŒáž·áž</option>
                      <option value="dentist">áž‘áž“áŸ’ážŠáž”ážŽáŸ’ážŒáž·áž</option>
                      <option value="pharmacist">áž±ážŸážáž€áž¶ážšáž¸</option>
                      <option value="nurse-bachelor">áž‚áž·áž›áž¶áž“áž»áž”ážŠáŸ’áž‹áž¶áž€(áž”ážšáž·áž‰áŸ’áž‰áž¶áž”ážáŸ’ážš)</option>
                      <option value="midwife-bachelor">áž†áŸ’áž˜áž”(áž”ážšáž·áž‰áŸ’áž‰áž¶áž”ážáŸ’ážš)</option>
                      <option value="nurse-secondary">áž‚áž·áž›áž¶áž“áž»áž”ážŠáŸ’áž‹áž¶áž€áž˜áž’áŸ’áž™áž˜</option>
                      <option value="midwife-secondary">áž†áŸ’áž˜áž”áž˜áž’áŸ’áž™áž˜</option>
                      <option value="nurse-primary">áž‚áž·áž›áž¶áž“áž»áž”ážŠáŸ’áž‹áž¶áž€áž”áž‹áž˜</option>
                      <option value="dental-nurse">áž‘áž“áŸ’ážáž‚áž·áž›áž¶áž“áž»áž”ážŠáŸ’áž‹áž¶áž€áž˜áž’áŸ’áž™áž˜</option>
                      <option value="lab-technician">áž¢áŸ’áž“áž€áž”áž…áŸ’áž…áŸáž€áž‘áŸážŸáž˜áž“áŸ’áž‘áž¸ážšáž–áž·ážŸáŸ„áž’áž“áŸáž˜áž’áŸ’áž™áž˜</option>
                      <option value="radiologist">áž¢áŸ’áž“áž€áž”áž…áŸ’áž…áŸáž€áž‘áŸážŸážœáž·áž‘áŸ’áž™áž»ážŸáž¶ážŸáŸ’ážšáŸ’áž</option>
                      <option value="physiotherapist">áž–áŸ’áž™áž¶áž”áž¶áž›ážŠáŸ„áž™áž…áž›áž“áž¶áž˜áž’áŸ’áž™áž˜</option>
                      <option value="it-specialist">áž–áŸážáŸŒáž˜áž¶áž“ážœáž·áž‘áŸ’áž™áž¶</option>
                      <option value="accountant">áž‚ážŽáž“áŸáž™áŸ’áž™áž€ážš</option>
                      <option value="public-admin">ážšážŠáŸ’áž‹áž”áž¶áž›â€‹ážŸáž¶áž’áž¶ážšážŽáŸˆ</option>
                      <option value="electrical-engineer">ážœáž·ážŸáŸ’ážœáž€áž˜áŸ’áž˜áž¢áž‚áŸ’áž‚áž·ážŸáž“áž¸</option>
                      <option value="business">áž¢áž¶áž‡áž¸ážœáž€</option>
                      <option value="trader">áž›áž€áŸ‹ážŠáž¼ážš</option>
                      <option value="caregiver">áž¢áŸ’áž“áž€ážáŸ‚áž‘áž¶áŸ†</option>
                      <option value="mid-doctor">áž‚áŸ’ážšáž¼áž–áŸáž‘áŸ’áž™áž˜áž’áŸ’áž™áž˜</option>
                      <option value="farmer">áž€ážŸáž·áž€ážš</option>
                      <option value="worker">áž€áž˜áŸ’áž˜áž€ážš</option>
                      <option value="student">áž“áž·ážŸáŸ’ážŸáž·áž</option>
                      <option value="retired">ážšáž¶áž‡áž€áž¶ážšáž“áž·ážœážáŸ’áž</option>
                      <option value="unemployed">áž‚áŸ’áž˜áž¶áž“áž€áž¶ážšáž„áž¶ážš</option>
                      <option value="housewife">áž˜áŸáž•áŸ’áž‘áŸ‡</option>
                      <option value="other">áž•áŸ’ážŸáŸáž„áŸ—</option>
                    </select>
                  </div>
                </div>

                <div class="subsection-title">áž‘áž¸áž€áž“áŸ’áž›áŸ‚áž„áž€áŸ†ážŽáž¾ážáž˜áŸ’ážáž¶áž™</div>

                <div class="form-row">
                  <div class="form-group">
                    <label>ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž</label>
                    <input v-model="formData.motherBirthProvince" type="text" placeholder="ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž" />
                  </div>
                  <div class="form-group">
                    <label>ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ</label>
                    <input v-model="formData.motherBirthDistrict" type="text" placeholder="ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ" />
                  </div>
                  <div class="form-group">
                    <label>ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹</label>
                    <input v-model="formData.motherBirthCommune" type="text" placeholder="ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž—áž¼áž˜áž·</label>
                    <input v-model="formData.motherBirthVillage" type="text" placeholder="áž—áž¼áž˜áž·" />
                  </div>
                  <div class="form-group">
                    <label>áž•áŸ’áž‘áŸ‡áž›áŸáž</label>
                    <input v-model="formData.motherBirthHouseNumber" type="text" placeholder="áž•áŸ’áž‘áŸ‡áž›áŸáž" />
                  </div>
                  <div class="form-group">
                    <label>áž•áŸ’áž›áž¼ážœáž›áŸáž</label>
                    <input v-model="formData.motherBirthStreetNumber" type="text" placeholder="áž•áŸ’áž›áž¼ážœáž›áŸáž" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž›áŸážáž‘áž¼ážšážŸáŸáž–áŸ’áž‘</label>
                    <input v-model="formData.motherPhone" type="tel" placeholder="+855 12 345 678" />
                  </div>
                </div>
              </div>
            </div>

            <!-- Tab 2: Spouse Information -->
            <div v-show="activeIconTab === 2">
              <!-- Spouse Basic Information Block -->
              <div class="form-block general-info-block">
                <div class="form-section-header">
                  <i class="pi pi-heart"></i>
                  <h4>áž–áŸážáŸŒáž˜áž¶áž“ážŸáž áž–áŸáž‘áŸ’áž’</h4>
                </div>
                
                <div class="form-row">
                  <div class="form-group full-width">
                    <label class="checkbox-label">
                      <input type="checkbox" v-model="formData.spouseWorksHere" />
                      <span>áž”áŸ’ážšáž–áž“áŸ’áž’/áž”áŸ’ážáž¸áž’áŸ’ážœáž¾áž€áž¶ážšážŠáŸ‚ážš</span>
                    </label>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž›áŸážážŸáŸ†áž”áž»ážáŸ’ážšážšáŸ€áž”áž€áž¶ážš</label>
                    <input v-model="formData.marriageCertificateNo" type="text" placeholder="áž›áŸážážŸáŸ†áž”áž»ážáŸ’ážšážšáŸ€áž”áž€áž¶ážš" />
                  </div>
                  <div class="form-group">
                    <label>áž›áŸážáž¢ážáŸ’ážážŸáž‰áŸ’áž‰áž¶ážŽáž”áŸážŽáŸ’ážŽážŸáž áž–áŸáž‘áŸ’áž’</label>
                    <input v-model="formData.spouseNationalId" type="text" placeholder="áž›áŸážáž¢ážáŸ’ážážŸáž‰áŸ’áž‰áž¶ážŽáž”áŸážŽáŸ’ážŽ" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž‚áŸ„ážáŸ’ážáž“áž¶áž˜ áž“áž·áž„áž“áž¶áž˜</label>
                    <input v-model="formData.spouseName" type="text" placeholder="áž‚áŸ„ážáŸ’ážáž“áž¶áž˜ áž“áž·áž„áž“áž¶áž˜" />
                  </div>
                  <div class="form-group">
                    <label>áž‚áŸ„ážáŸ’ážáž“áž¶áž˜ áž“áž·áž„áž“áž¶áž˜áž¡áž¶ážáž¶áŸ†áž„</label>
                    <input v-model="formData.spouseLatinName" type="text" placeholder="Latin Name" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>ážáŸ’áž„áŸƒážáŸ‚áž†áŸ’áž“áž¶áŸ†áž€áŸ†ážŽáž¾áž</label>
                    <div class="date-picker-group">
                      <select v-model="formData.spouseBirthDay" class="date-select">
                        <option value="">ážáŸ’áž„áŸƒ</option>
                        <option v-for="day in 31" :key="day" :value="day">{{ day }}</option>
                      </select>
                      <select v-model="formData.spouseBirthMonth" class="date-select">
                        <option value="">ážáŸ‚</option>
                        <option value="1">áž˜áž€ážšáž¶</option>
                        <option value="2">áž€áž»áž˜áŸ’áž—áŸˆ</option>
                        <option value="3">áž˜áž¸áž“áž¶</option>
                        <option value="4">áž˜áŸážŸáž¶</option>
                        <option value="5">áž§ážŸáž—áž¶</option>
                        <option value="6">áž˜áž·ážáž»áž“áž¶</option>
                        <option value="7">áž€áž€áŸ’áž€ážŠáž¶</option>
                        <option value="8">ážŸáž¸áž áž¶</option>
                        <option value="9">áž€áž‰áŸ’áž‰áž¶</option>
                        <option value="10">ážáž»áž›áž¶</option>
                        <option value="11">ážœáž·áž…áŸ’áž†áž·áž€áž¶</option>
                        <option value="12">áž’áŸ’áž“áž¼</option>
                      </select>
                      <select v-model="formData.spouseBirthYear" class="date-select">
                        <option value="">áž†áŸ’áž“áž¶áŸ†</option>
                        <option v-for="year in 100" :key="year" :value="2026 - year">{{ 2026 - year }}</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <label>ážŸáŸ’ážáž¶áž“áž—áž¶áž–</label>
                    <div class="radio-group">
                      <label class="radio-label">
                        <input type="radio" v-model="formData.spouseStatus" value="alive" />
                        <span>ážšážŸáŸ‹</span>
                      </label>
                      <label class="radio-label">
                        <input type="radio" v-model="formData.spouseStatus" value="deceased" />
                        <span>ážŸáŸ’áž›áž¶áž”áŸ‹</span>
                      </label>
                    </div>
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž˜áž»ážážšáž”ážš</label>
                    <select v-model="formData.spouseOccupation">
                      <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                      <option value="civil-servant">áž˜áž“áŸ’ážáŸ’ážšáž¸ážšáž¶áž‡áž€áž¶ážš</option>
                      <option value="teacher">áž‚áŸ’ážšáž¼áž”áž„áŸ’ážšáŸ€áž“</option>
                      <option value="professor">ážŸáž¶ážŸáŸ’ážáŸ’ážšáž¶áž…áž¶ážšáŸ’áž™áž˜áž áž¶áž”ážšáž·áž‰áŸ’áž‰áž¶</option>
                      <option value="associate-professor">ážŸáž¶ážŸáŸ’ážŠáŸ’ážšáž¶áž…áž¶ážšáŸ’áž™ážšáž„</option>
                      <option value="assistant-professor">ážŸáž¶ážŸáŸ’ážŠáŸ’ážšáž¶áž…áž¶ážšáŸ’áž™áž‡áŸ†áž“áž½áž™</option>
                      <option value="medical-specialist">ážœáŸáž‡áŸ’áž‡áž”ážŽáŸ’ážáž·ážáž¯áž€áž‘áŸážŸ</option>
                      <option value="medical-master">ážœáŸáž‡áŸ’áž‡áž”ážŽáŸ’ážáž·áž(áž‡áŸ†áž“áž¶áž‰/áž¢áž“áž»áž”ážŽáŸ’ážŒáž·áž)</option>
                      <option value="medical-doctor">ážœáŸáž‡áŸ’áž‡áž”ážŽáŸ’ážŒáž·áž</option>
                      <option value="dentist">áž‘áž“áŸ’ážŠáž”ážŽáŸ’ážŒáž·áž</option>
                      <option value="pharmacist">áž±ážŸážáž€áž¶ážšáž¸</option>
                      <option value="nurse-bachelor">áž‚áž·áž›áž¶áž“áž»áž”ážŠáŸ’áž‹áž¶áž€(áž”ážšáž·áž‰áŸ’áž‰áž¶áž”ážáŸ’ážš)</option>
                      <option value="midwife-bachelor">áž†áŸ’áž˜áž”(áž”ážšáž·áž‰áŸ’áž‰áž¶áž”ážáŸ’ážš)</option>
                      <option value="nurse-secondary">áž‚áž·áž›áž¶áž“áž»áž”ážŠáŸ’áž‹áž¶áž€áž˜áž’áŸ’áž™áž˜</option>
                      <option value="midwife-secondary">áž†áŸ’áž˜áž”áž˜áž’áŸ’áž™áž˜</option>
                      <option value="nurse-primary">áž‚áž·áž›áž¶áž“áž»áž”ážŠáŸ’áž‹áž¶áž€áž”áž‹áž˜</option>
                      <option value="dental-nurse">áž‘áž“áŸ’ážáž‚áž·áž›áž¶áž“áž»áž”ážŠáŸ’áž‹áž¶áž€áž˜áž’áŸ’áž™áž˜</option>
                      <option value="lab-technician">áž¢áŸ’áž“áž€áž”áž…áŸ’áž…áŸáž€áž‘áŸážŸáž˜áž“áŸ’áž‘áž¸ážšáž–áž·ážŸáŸ„áž’áž“áŸáž˜áž’áŸ’áž™áž˜</option>
                      <option value="radiologist">áž¢áŸ’áž“áž€áž”áž…áŸ’áž…áŸáž€áž‘áŸážŸážœáž·áž‘áŸ’áž™áž»ážŸáž¶ážŸáŸ’ážšáŸ’áž</option>
                      <option value="physiotherapist">áž–áŸ’áž™áž¶áž”áž¶áž›ážŠáŸ„áž™áž…áž›áž“áž¶áž˜áž’áŸ’áž™áž˜</option>
                      <option value="it-specialist">áž–áŸážáŸŒáž˜áž¶áž“ážœáž·áž‘áŸ’áž™áž¶</option>
                      <option value="accountant">áž‚ážŽáž“áŸáž™áŸ’áž™áž€ážš</option>
                      <option value="public-admin">ážšážŠáŸ’áž‹áž”áž¶áž›â€‹ážŸáž¶áž’áž¶ážšážŽáŸˆ</option>
                      <option value="electrical-engineer">ážœáž·ážŸáŸ’ážœáž€áž˜áŸ’áž˜áž¢áž‚áŸ’áž‚áž·ážŸáž“áž¸</option>
                      <option value="business">áž¢áž¶áž‡áž¸ážœáž€</option>
                      <option value="trader">áž›áž€áŸ‹ážŠáž¼ážš</option>
                      <option value="caregiver">áž¢áŸ’áž“áž€ážáŸ‚áž‘áž¶áŸ†</option>
                      <option value="mid-doctor">áž‚áŸ’ážšáž¼áž–áŸáž‘áŸ’áž™áž˜áž’áŸ’áž™áž˜</option>
                      <option value="farmer">áž€ážŸáž·áž€ážš</option>
                      <option value="worker">áž€áž˜áŸ’áž˜áž€ážš</option>
                      <option value="student">áž“áž·ážŸáŸ’ážŸáž·áž</option>
                      <option value="retired">ážšáž¶áž‡áž€áž¶ážšáž“áž·ážœážáŸ’áž</option>
                      <option value="unemployed">áž‚áŸ’áž˜áž¶áž“áž€áž¶ážšáž„áž¶ážš</option>
                      <option value="housewife">áž˜áŸáž•áŸ’áž‘áŸ‡</option>
                      <option value="other">áž•áŸ’ážŸáŸáž„áŸ—</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>áž‘áž¸áž€áž“áŸ’áž›áŸ‚áž„áž”áŸ†áž–áŸáž‰áž€áž¶ážšáž„áž¶ážš</label>
                    <input v-model="formData.spouseWorkplace" type="text" placeholder="áž‘áž¸áž€áž“áŸ’áž›áŸ‚áž„áž”áŸ†áž–áŸáž‰áž€áž¶ážšáž„áž¶ážš" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž‡áž“áž‡áž¶ážáž·</label>
                    <select v-model="formData.spouseEthnicity">
                      <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                      <option value="khmer">ážáŸ’áž˜áŸ‚ážš</option>
                      <option value="chinese">áž…áž·áž“</option>
                      <option value="vietnamese">ážœáŸ€ážážŽáž¶áž˜</option>
                      <option value="cham">áž…áž¶áž˜</option>
                      <option value="other">áž•áŸ’ážŸáŸáž„áŸ—</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label>ážŸáž‰áŸ’áž‡áž¶ážáž·</label>
                    <select v-model="formData.spouseNationality">
                      <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                      <option value="khmer">ážáŸ’áž˜áŸ‚ážš</option>
                      <option value="foreigner">áž”ážšáž‘áŸážŸ</option>
                    </select>
                  </div>
                </div>
              </div>

              <!-- Spouse Birth Place Block -->
              <div class="form-block birthplace-block">
                <div class="form-section-header">
                  <i class="pi pi-map-marker"></i>
                  <h4>áž‘áž¸áž€áž“áŸ’áž›áŸ‚áž„áž€áŸ†ážŽáž¾ážážŸáž áž–áŸáž‘áŸ’áž’</h4>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž</label>
                    <input v-model="formData.spouseBirthProvince" type="text" placeholder="ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž" />
                  </div>
                  <div class="form-group">
                    <label>ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ</label>
                    <input v-model="formData.spouseBirthDistrict" type="text" placeholder="ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ" />
                  </div>
                  <div class="form-group">
                    <label>ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹</label>
                    <input v-model="formData.spouseBirthCommune" type="text" placeholder="ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž—áž¼áž˜áž·</label>
                    <input v-model="formData.spouseBirthVillage" type="text" placeholder="áž—áž¼áž˜áž·" />
                  </div>
                  <div class="form-group">
                    <label>áž•áŸ’áž‘áŸ‡áž›áŸáž</label>
                    <input v-model="formData.spouseBirthHouseNumber" type="text" placeholder="áž•áŸ’áž‘áŸ‡áž›áŸáž" />
                  </div>
                  <div class="form-group">
                    <label>áž•áŸ’áž›áž¼ážœáž›áŸáž</label>
                    <input v-model="formData.spouseBirthStreetNumber" type="text" placeholder="áž•áŸ’áž›áž¼ážœáž›áŸáž" />
                  </div>
                </div>
              </div>

              <!-- Spouse Current Address Block -->
              <div class="form-block address-block">
                <div class="form-section-header">
                  <i class="pi pi-home"></i>
                  <h4>áž¢áž¶ážŸáž™ážŠáŸ’áž‹áž¶áž“ážŸáž áž–áŸáž‘áŸ’áž’</h4>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž</label>
                    <input v-model="formData.spouseAddressProvince" type="text" placeholder="ážšáž¶áž‡áž’áž¶áž“áž¸/ážáŸážáŸ’áž" />
                  </div>
                  <div class="form-group">
                    <label>ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ</label>
                    <input v-model="formData.spouseAddressDistrict" type="text" placeholder="ážŸáŸ’ážšáž»áž€/ážážŽáŸ’ážŒ" />
                  </div>
                  <div class="form-group">
                    <label>ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹</label>
                    <input v-model="formData.spouseAddressCommune" type="text" placeholder="ážƒáž»áŸ†/ážŸáž„áŸ’áž€áž¶ážáŸ‹" />
                  </div>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž—áž¼áž˜áž·</label>
                    <input v-model="formData.spouseAddressVillage" type="text" placeholder="áž—áž¼áž˜áž·" />
                  </div>
                  <div class="form-group">
                    <label>áž•áŸ’áž‘áŸ‡áž›áŸáž</label>
                    <input v-model="formData.spouseAddressHouseNumber" type="text" placeholder="áž•áŸ’áž‘áŸ‡áž›áŸáž" />
                  </div>
                  <div class="form-group">
                    <label>áž•áŸ’áž›áž¼ážœáž›áŸáž</label>
                    <input v-model="formData.spouseAddressStreetNumber" type="text" placeholder="áž•áŸ’áž›áž¼ážœáž›áŸáž" />
                  </div>
                </div>
              </div>

              <!-- Spouse Contact Information Block -->
              <div class="form-block emergency-block">
                <div class="form-section-header">
                  <i class="pi pi-phone"></i>
                  <h4>áž›áŸážáž‘áŸ†áž“áž¶áž€áŸ‹áž‘áŸ†áž“áž„</h4>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label>áž›áŸážáž‘áž¼ážšážŸáŸáž–áŸ’áž‘</label>
                    <input v-model="formData.spousePhone" type="tel" placeholder="+855 12 345 678" />
                  </div>
                  <div class="form-group">
                    <label>áž¢áŸŠáž¸áž˜áŸ‰áŸ‚áž›</label>
                    <input v-model="formData.spouseEmail" type="email" placeholder="email@example.com" />
                  </div>
                </div>
              </div>
            </div>

            <!-- Tab 3: Children Information -->
            <div v-show="activeIconTab === 3">
              <div class="form-block general-info-block">
                <div class="form-section-header">
                  <i class="pi pi-users"></i>
                  <h4>áž–áŸážáŸŒáž˜áž¶áž“áž€áž¼áž“</h4>
                </div>

                <button type="button" class="btn-add-child" @click="addChild">
                  <i class="pi pi-plus"></i> áž”áž“áŸ’ážáŸ‚áž˜áž€áž¼áž“
                </button>

                <div v-if="formData.children && formData.children.length > 0" class="children-table-container">
                  <table class="children-table">
                    <thead>
                      <tr>
                        <th>áž›áŸážážŸáž˜áŸ’áž‚áž¶áž›áŸ‹áž€áž¼áž“</th>
                        <th>áž‚áŸ„ážáŸ’ážáž“áž¶áž˜ áž“áž·áž„áž“áž¶áž˜</th>
                        <th>áž‚áŸ„ážáŸ’ážáž“áž¶áž˜ áž“áž·áž„áž“áž¶áž˜áž¡áž¶ážáž¶áŸ†áž„</th>
                        <th>áž—áŸáž‘</th>
                        <th>ážáŸ’áž„áŸƒážáŸ‚áž†áŸ’áž“áž¶áŸ†áž€áŸ†ážŽáž¾áž</th>
                        <th>áž˜áž»ážážšáž”ážš</th>
                        <th>ážŸáŸ’ážáž¶áž“áž—áž¶áž–</th>
                        <th>ážŸáž€áž˜áŸ’áž˜áž—áž¶áž–</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr v-for="(child, index) in formData.children" :key="index">
                        <td>
                          <input v-model="child.childId" type="text" placeholder="áž›áŸáž" class="table-input" />
                        </td>
                        <td>
                          <input v-model="child.name" type="text" placeholder="áž‚áŸ„ážáŸ’ážáž“áž¶áž˜ áž“áž·áž„áž“áž¶áž˜" class="table-input" />
                        </td>
                        <td>
                          <input v-model="child.latinName" type="text" placeholder="Latin Name" class="table-input" />
                        </td>
                        <td>
                          <select v-model="child.gender" class="table-select">
                            <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                            <option value="male">áž”áŸ’ážšáž»ážŸ</option>
                            <option value="female">ážŸáŸ’ážšáž¸</option>
                          </select>
                        </td>
                        <td>
                          <input v-model="child.dateOfBirth" type="date" class="table-input" />
                        </td>
                        <td>
                          <select v-model="child.occupation" class="table-select">
                            <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                            <option value="student">áž“áž·ážŸáŸ’ážŸáž·áž</option>
                            <option value="civil-servant">áž˜áž“áŸ’ážáŸ’ážšáž¸ážšáž¶áž‡áž€áž¶ážš</option>
                            <option value="teacher">áž‚áŸ’ážšáž¼áž”áž„áŸ’ážšáŸ€áž“</option>
                            <option value="doctor">áž‚áŸ’ážšáž¼áž–áŸáž‘áŸ’áž™</option>
                            <option value="business">áž¢áž¶áž‡áž¸ážœáž€</option>
                            <option value="worker">áž€áž˜áŸ’áž˜áž€ážš</option>
                            <option value="unemployed">áž‚áŸ’áž˜áž¶áž“áž€áž¶ážšáž„áž¶ážš</option>
                            <option value="other">áž•áŸ’ážŸáŸáž„áŸ—</option>
                          </select>
                        </td>
                        <td>
                          <select v-model="child.status" class="table-select">
                            <option value="">áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ</option>
                            <option value="alive">ážšážŸáŸ‹</option>
                            <option value="deceased">ážŸáŸ’áž›áž¶áž”áŸ‹</option>
                          </select>
                        </td>
                        <td>
                          <button type="button" class="btn-delete-child" @click="removeChild(index)" title="áž›áž»áž”">
                            <i class="pi pi-trash"></i>
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <div v-else class="empty-children">
                  <p>áž˜áž·áž“áž‘áž¶áž“áŸ‹áž˜áž¶áž“áž–áŸážáŸŒáž˜áž¶áž“áž€áž¼áž“áŸ” ážŸáž¼áž˜áž…áž»áž…áž”áŸŠáž¼ážáž»áž„ "áž”áž“áŸ’ážáŸ‚áž˜áž€áž¼áž“" ážŠáž¾áž˜áŸ’áž”áž¸áž”áž“áŸ’ážáŸ‚áž˜áŸ”</p>
                </div>
              </div>
            </div>

            <!-- Tab 4: Education Level -->
            <div v-show="activeIconTab === 4">
              <div class="form-block general-info-block">
                <div class="form-section-header">
                  <i class="pi pi-graduation-cap"></i>
                  <h4>áž–áŸážáŸŒáž˜áž¶áž“áž€áž˜áŸ’ážšáž·ážážœáž”áŸ’áž”áž’áž˜áŸŒ</h4>
                </div>

                <div class="form-grid">
                  <div class="form-group">
                    <label><i class="pi pi-book"></i> áž€áž˜áŸ’ážšáž·ážážœáž”áŸ’áž”áž’áž˜áŸŒ <span class="required">*</span></label>
                    <select v-model="formData.educationLevel" class="form-input" required>
                      <option value="">-- áž‡áŸ’ážšáž¾ážŸážšáž¾ážŸ --</option>
                      <option value="áž˜áž·áž“áž…áŸáŸ‡áž¢áž€áŸ’ážŸážš">áž˜áž·áž“áž…áŸáŸ‡áž¢áž€áŸ’ážŸážš</option>
                      <option value="áž”áž‹áž˜ážŸáž·áž€áŸ’ážŸáž¶">áž”áž‹áž˜ážŸáž·áž€áŸ’ážŸáž¶</option>
                      <option value="áž¢áž“áž»ážœáž·áž‘áŸ’áž™áž¶áž›áŸáž™">áž¢áž“áž»ážœáž·áž‘áŸ’áž™áž¶áž›áŸáž™</option>
                      <option value="ážœáž·áž‘áŸ’áž™áž¶áž›áŸáž™">ážœáž·áž‘áŸ’áž™áž¶áž›áŸáž™</option>
                      <option value="áž”ážšáž·áž‰áŸ’áž‰áž¶áž”áŸážáŸ’ážš">áž”ážšáž·áž‰áŸ’áž‰áž¶áž”áŸážáŸ’ážš</option>
                      <option value="áž”ážšáž·áž‰áŸ’áž‰áž¶áž”áŸážáŸ’ážšážšáž„">áž”ážšáž·áž‰áŸ’áž‰áž¶áž”áŸážáŸ’ážšážšáž„</option>
                      <option value="áž¢áž“áž»áž”ážŽáŸ’ážŒáž·áž">áž¢áž“áž»áž”ážŽáŸ’ážŒáž·áž</option>
                      <option value="áž”ážŽáŸ’ážŒáž·áž">áž”ážŽáŸ’ážŒáž·áž</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label><i class="pi pi-building"></i> ážˆáŸ’áž˜áŸ„áŸ‡ážŸáž¶áž›áž¶ážšáŸ€áž“/ážŸáž¶áž€áž›ážœáž·áž‘áŸ’áž™áž¶áž›áŸáž™áž…áž»áž„áž€áŸ’ážšáŸ„áž™</label>
                    <input 
                      type="text" 
                      v-model="formData.lastSchool" 
                      class="form-input"
                      placeholder="áž”áž‰áŸ’áž…áž¼áž›ážˆáŸ’áž˜áŸ„áŸ‡ážŸáž¶áž›áž¶ážšáŸ€áž“/ážŸáž¶áž€áž›ážœáž·áž‘áŸ’áž™áž¶áž›áŸáž™"
                    />
                  </div>

                  <div class="form-group">
                    <label><i class="pi pi-calendar"></i> áž†áŸ’áž“áž¶áŸ†áž”áž‰áŸ’áž…áž”áŸ‹</label>
                    <input 
                      type="number" 
                      v-model="formData.graduationYear" 
                      class="form-input"
                      placeholder="áž†áŸ’áž“áž¶áŸ†áž”áž‰áŸ’áž…áž”áŸ‹"
                      min="1900"
                      max="2100"
                    />
                  </div>

                  <div class="form-group">
                    <label><i class="pi pi-star"></i> ážœáž‚áŸ’áž‚áž”ážŽáŸ’ážáž»áŸ‡áž”ážŽáŸ’ážáž¶áž›áž”áž¶áž“áž…áž¼áž›ážšáž½áž˜</label>
                    <textarea 
                      v-model="formData.trainings" 
                      class="form-input"
                      rows="3"
                      placeholder="áž”áž‰áŸ’áž‡áž¸ážœáž‚áŸ’áž‚áž”ážŽáŸ’ážáž»áŸ‡áž”ážŽáŸ’ážáž¶áž›ážŠáŸ‚áž›áž”áž¶áž“áž…áž¼áž›ážšáž½áž˜ (áž”áŸ†áž”áŸ‚áž€ážŠáŸ„áž™ážŸáž‰áŸ’áž‰áž¶áž€áŸ’áž”áŸ€ážŸ)"
                    ></textarea>
                  </div>

                  <div class="form-group">
                    <label><i class="pi pi-trophy"></i> ážŸáž˜áž·áž‘áŸ’áž’áž•áž› áž“áž·áž„áž”áž‘áž–áž·ážŸáŸ„áž’áž“áŸ</label>
                    <textarea 
                      v-model="formData.achievements" 
                      class="form-input"
                      rows="3"
                      placeholder="ážŸáž˜áž·áž‘áŸ’áž’áž•áž› áž“áž·áž„áž”áž‘áž–áž·ážŸáŸ„áž’áž“áŸáž€áž¶ážšáž„áž¶ážš"
                    ></textarea>
                  </div>

                  <div class="form-group">
                    <label><i class="pi pi-language"></i> áž—áž¶ážŸáž¶áž”ážšáž‘áŸážŸážŠáŸ‚áž›áž…áŸáŸ‡</label>
                    <input 
                      type="text" 
                      v-model="formData.languages" 
                      class="form-input"
                      placeholder="áž§. áž¢áž„áŸ‹áž‚áŸ’áž›áŸážŸ, áž…áž·áž“, áž”áž¶ážšáž¶áŸ†áž„"
                    />
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Form Actions -->
          <div class="form-actions">
            <div class="form-actions-left">
              <button type="button" class="btn-back" @click="prevTab" v-if="activeIconTab > 0">
                <i class="pi pi-chevron-left"></i> ážáŸ’ážšáž¡áž”áŸ‹áž€áŸ’ážšáŸ„áž™
              </button>
            </div>
            <div class="form-actions-right">
              <button type="button" class="btn-cancel" @click="closeDialog">
                <i class="pi pi-times"></i> áž”áŸ„áŸ‡áž”áž„áŸ‹
              </button>
              <button type="button" class="btn-next" @click="nextTab" v-if="activeIconTab < iconTabs.length - 1">
                áž”áž“áŸ’áž‘áž¶áž”áŸ‹ <i class="pi pi-chevron-right"></i>
              </button>
              <button type="submit" class="btn-submit">
                <i class="pi pi-check"></i> ážšáž€áŸ’ážŸáž¶áž‘áž»áž€
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <!-- Delete Confirmation Dialog -->
    <div v-if="deleteDialogVisible" class="modal-overlay" @click.self="deleteDialogVisible = false">
      <div class="modal-content-small">
        <h3>áž”áž‰áŸ’áž‡áž¶áž€áŸ‹áž€áž¶ážšáž›áž»áž”</h3>
        <div class="confirmation-content">
          <i class="pi pi-exclamation-triangle" style="font-size: 3rem; color: #f59e0b;"></i>
          <p v-if="selectedEmployee">
            ážáž¾áž¢áŸ’áž“áž€áž–áž·ážáž‡áž¶áž…áž„áŸ‹áž›áž»áž”áž”áž»áž‚áŸ’áž‚áž›áž·áž€ <strong>{{ selectedEmployee.firstName }} {{ selectedEmployee.lastName }}</strong>?
          </p>
        </div>
        <div class="dialog-footer">
          <button class="btn-cancel" @click="deleteDialogVisible = false">
            <i class="pi pi-times"></i> áž”áŸ„áŸ‡áž”áž„áŸ‹
          </button>
          <button class="btn-delete" @click="deleteEmployee">
            <i class="pi pi-trash"></i> áž›áž»áž”
          </button>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, onMounted, computed, watch } from 'vue';
import { useRouter } from 'vue-router';
import api from '../api';

const router = useRouter();
const employees = ref([]);
const dialogVisible = ref(false);
const deleteDialogVisible = ref(false);
const selectedEmployee = ref(null);
const dialogMode = ref('create');
const activeIconTab = ref(0);

const formData = ref({
  employeeId: '',
  khmerSurname: '',
  khmerGivenName: '',
  latinSurname: '',
  latinGivenName: '',
  gender: '',
  birthDay: '',
  birthMonth: '',
  birthYear: '',
  bloodType: '',
  civilServantId: '',
  birthCertificateNo: '',
  nationalIdNo: '',
  idValidFrom: null,
  idExpiryDate: null,
  passportNo: '',
  citizenship: '',
  ethnicity: '',
  phone1: '',
  phone2: '',
  email: '',
  otherInfo: '',
  maritalStatus: '',
  physicalAttributes: '',
  photo: null,
  // Birth Place
  birthProvince: '',
  birthDistrict: '',
  birthCommune: '',
  birthVillage: '',
  birthHouseNumber: '',
  birthStreetNumber: '',
  // Current Address
  addressProvince: '',
  addressDistrict: '',
  addressCommune: '',
  addressVillage: '',
  addressHouseNumber: '',
  addressStreetNumber: '',
  // Emergency Contact
  emergencySurname: '',
  emergencyGivenName: '',
  emergencyGender: '',
  emergencyRelationship: '',
  emergencyOccupation: '',
  emergencyProvince: '',
  emergencyDistrict: '',
  emergencyCommune: '',
  emergencyVillage: '',
  emergencyHouseNumber: '',
  emergencyStreetNumber: '',
  emergencyPhone: '',
  emergencyEmail: '',
  // Father Information
  fatherName: '',
  fatherLatinName: '',
  fatherBirthDay: '',
  fatherBirthMonth: '',
  fatherBirthYear: '',
  fatherStatus: '',
  fatherEthnicity: '',
  fatherNationality: '',
  fatherOccupation: '',
  fatherBirthProvince: '',
  fatherBirthDistrict: '',
  fatherBirthCommune: '',
  fatherBirthVillage: '',
  fatherBirthHouseNumber: '',
  fatherBirthStreetNumber: '',
  fatherPhone: '',
  // Mother Information
  motherName: '',
  motherLatinName: '',
  motherBirthDay: '',
  motherBirthMonth: '',
  motherBirthYear: '',
  motherStatus: '',
  motherEthnicity: '',
  motherNationality: '',
  motherOccupation: '',
  motherBirthProvince: '',
  motherBirthDistrict: '',
  motherBirthCommune: '',
  motherBirthVillage: '',
  motherBirthHouseNumber: '',
  motherBirthStreetNumber: '',
  motherPhone: '',
  // Spouse Information
  spouseWorksHere: false,
  marriageCertificateNo: '',
  spouseNationalId: '',
  spouseName: '',
  spouseLatinName: '',
  spouseBirthDay: '',
  spouseBirthMonth: '',
  spouseBirthYear: '',
  spouseStatus: '',
  spouseOccupation: '',
  spouseWorkplace: '',
  spouseEthnicity: '',
  spouseNationality: '',
  spouseBirthProvince: '',
  spouseBirthDistrict: '',
  spouseBirthCommune: '',
  spouseBirthVillage: '',
  spouseBirthHouseNumber: '',
  spouseBirthStreetNumber: '',
  spouseAddressProvince: '',
  spouseAddressDistrict: '',
  spouseAddressCommune: '',
  spouseAddressVillage: '',
  spouseAddressHouseNumber: '',
  spouseAddressStreetNumber: '',
  spousePhone: '',
  spouseEmail: '',
  // Children Information
  children: [],
  // Education Information
  educationLevel: '',
  lastSchool: '',
  graduationYear: '',
  trainings: '',
  achievements: '',
  languages: ''
});

const iconTabs = [
  { icon: 'pi pi-id-card', label: 'áž–áŸážáŸŒáž˜áž¶áž“áž•áŸ’áž‘áž¶áž›áŸ‹ážáŸ’áž›áž½áž“' },
  { icon: 'pi pi-home', label: 'áž–áŸážáŸŒáž˜áž¶áž“ážªáž–áž»áž€áž˜áŸ’ážáž¶áž™' },
  { icon: 'pi pi-heart', label: 'áž–áŸážáŸŒáž˜áž¶áž“ážŸáž áž–áŸáž‘áŸ’áž’' },
  { icon: 'pi pi-users', label: 'áž–áŸážáŸŒáž˜áž¶áž“áž€áž¼áž“' },
  { icon: 'pi pi-book', label: 'áž–áŸážáŸŒáž˜áž¶áž“áž€áž˜áŸ’ážšáž·ážážœáž”áŸ’áž”áž’áž˜áŸŒ' }
];

const progressPercentage = computed(() => {
  const fields = ['employeeId', 'nationalIdNo', 'khmerSurname', 'khmerGivenName', 'gender', 'phone1', 'maritalStatus', 'citizenship', 'ethnicity'];
  const filled = fields.filter(f => formData.value[f]).length;
  return Math.round((filled / fields.length) * 100);
});

const loadEmployees = async () => {
  try {
    const response = await api.get('/employees');
    employees.value = response.data;
  } catch (error) {
    console.error('Error loading employees:', error);
  }
};

const openDialog = (employee = null) => {
  if (employee) {
    dialogMode.value = 'edit';
    formData.value = { 
      ...employee,
      children: employee.children || []
    };
    selectedEmployee.value = employee;
  } else {
    dialogMode.value = 'create';
    formData.value = {
      employeeId: '',
      khmerSurname: '',
      khmerGivenName: '',
      latinSurname: '',
      latinGivenName: '',
      latinFullName: '',
      gender: '',
      birthDay: '',
      birthMonth: '',
      birthYear: '',
      bloodType: '',
      civilServantId: '',
      birthCertificateNo: '',
      nationalIdNo: '',
      idValidFrom: null,
      idExpiryDate: null,
      passportNo: '',
      citizenship: '',
      ethnicity: '',
      province: '',
      phone1: '',
      phone2: '',
      email: '',
      otherInfo: '',
      maritalStatus: '',
      physicalAttributes: '',
      photo: null,
      // Parent Information
      fatherName: '',
      fatherOccupation: '',
      fatherStatus: '',
      fatherPhone: '',
      fatherBirthProvince: '',
      fatherBirthDistrict: '',
      fatherBirthCommune: '',
      fatherBirthVillage: '',
      fatherBirthHouseNumber: '',
      fatherBirthStreetNumber: '',
      motherName: '',
      motherOccupation: '',
      motherStatus: '',
      motherPhone: '',
      motherBirthProvince: '',
      motherBirthDistrict: '',
      motherBirthCommune: '',
      motherBirthVillage: '',
      motherBirthHouseNumber: '',
      motherBirthStreetNumber: '',
      // Spouse Information
      spouseWorksHere: false,
      spouseNationalId: '',
      spouseName: '',
      spouseLatinName: '',
      spouseBirthDay: '',
      spouseBirthMonth: '',
      spouseBirthYear: '',
      spouseStatus: '',
      spouseOccupation: '',
      spouseWorkplace: '',
      spouseEthnicity: '',
      spouseNationality: '',
      spouseBirthProvince: '',
      spouseBirthDistrict: '',
      spouseBirthCommune: '',
      spouseBirthVillage: '',
      spouseBirthHouseNumber: '',
      spouseBirthStreetNumber: '',
      spouseAddressProvince: '',
      spouseAddressDistrict: '',
      spouseAddressCommune: '',
      spouseAddressVillage: '',
      spouseAddressHouseNumber: '',
      spouseAddressStreetNumber: '',
      spousePhone: '',
      spouseEmail: '',
      // Children Information
      children: [],
      // Education Information
      educationLevel: '',
      lastSchool: '',
      graduationYear: '',
      trainings: '',
      achievements: '',
      languages: ''
    };
    selectedEmployee.value = null;
  }
  dialogVisible.value = true;
};

const closeDialog = () => {
  dialogVisible.value = false;
  formData.value = {
    employeeId: '',
    khmerSurname: '',
    khmerGivenName: '',
    latinSurname: '',
    latinGivenName: '',
    latinFullName: '',
    gender: '',
    birthDay: '',
    birthMonth: '',
    birthYear: '',
    bloodType: '',
    civilServantId: '',
    birthCertificateNo: '',
    nationalIdNo: '',
    idValidFrom: null,
    idExpiryDate: null,
    passportNo: '',
    citizenship: '',
    ethnicity: '',
    province: '',
    phone1: '',
    phone2: '',
    email: '',
    otherInfo: '',
    maritalStatus: '',
    physicalAttributes: '',
    photo: null,
    // Parent Information
    fatherName: '',
    fatherOccupation: '',
    fatherStatus: '',
    fatherPhone: '',
    fatherBirthProvince: '',
    fatherBirthDistrict: '',
    fatherBirthCommune: '',
    fatherBirthVillage: '',
    fatherBirthHouseNumber: '',
    fatherBirthStreetNumber: '',
    motherName: '',
    motherOccupation: '',
    motherStatus: '',
    motherPhone: '',
    motherBirthProvince: '',
    motherBirthDistrict: '',
    motherBirthCommune: '',
    motherBirthVillage: '',
    motherBirthHouseNumber: '',
    motherBirthStreetNumber: '',
    // Spouse Information
    spouseWorksHere: false,
    spouseNationalId: '',
    spouseName: '',
    spouseLatinName: '',
    spouseBirthDay: '',
    spouseBirthMonth: '',
    spouseBirthYear: '',
    spouseStatus: '',
    spouseOccupation: '',
    spouseWorkplace: '',
    spouseEthnicity: '',
    spouseNationality: '',
    spouseBirthProvince: '',
    spouseBirthDistrict: '',
    spouseBirthCommune: '',
    spouseBirthVillage: '',
    spouseBirthHouseNumber: '',
    spouseBirthStreetNumber: '',
    spouseAddressProvince: '',
    spouseAddressDistrict: '',
    spouseAddressCommune: '',
    spouseAddressVillage: '',
    spouseAddressHouseNumber: '',
    spouseAddressStreetNumber: '',
    spousePhone: '',
    spouseEmail: '',
    // Children Information
    children: [],
    // Education Information
    educationLevel: '',
    lastSchool: '',
    graduationYear: '',
    trainings: '',
    achievements: '',
    languages: ''
  };
};

const handleSubmit = async () => {
  try {
    if (dialogMode.value === 'create') {
      await api.post('/employees', formData.value);
    } else {
      await api.put(`/employees/${formData.value._id}`, formData.value);
    }
    await loadEmployees();
    closeDialog();
  } catch (error) {
    console.error('Error saving employee:', error);
    alert('áž€áŸ†áž áž»ážŸáž€áŸ’áž“áž»áž„áž€áž¶ážšážšáž€áŸ’ážŸáž¶áž‘áž»áž€');
  }
};

const viewEmployee = (id) => {
  router.push(`/employees/${id}`);
};

const editEmployee = (employee) => {
  openDialog(employee);
};

const nextTab = () => {
  if (activeIconTab.value < iconTabs.length - 1) {
    activeIconTab.value++;
  }
};

const prevTab = () => {
  if (activeIconTab.value > 0) {
    activeIconTab.value--;
  }
};

const addChild = () => {
  console.log('addChild called, current children:', formData.value.children);
  if (!formData.value.children) {
    formData.value.children = [];
  }
  formData.value.children.push({
    childId: '',
    name: '',
    latinName: '',
    gender: '',
    dateOfBirth: '',
    occupation: '',
    status: ''
  });
  console.log('Child added, new children array:', formData.value.children);
};

const removeChild = (index) => {
  console.log('removeChild called for index:', index);
  formData.value.children.splice(index, 1);
  console.log('Child removed, remaining children:', formData.value.children);
};

const confirmDelete = (employee) => {
  selectedEmployee.value = employee;
  deleteDialogVisible.value = true;
};

const deleteEmployee = async () => {
  try {
    await api.delete(`/employees/${selectedEmployee.value._id}`);
    await loadEmployees();
    deleteDialogVisible.value = false;
    selectedEmployee.value = null;
  } catch (error) {
    console.error('Error deleting employee:', error);
    alert('áž€áŸ†áž áž»ážŸáž€áŸ’áž“áž»áž„áž€áž¶ážšáž›áž»áž”');
  }
};

onMounted(() => {
  loadEmployees();
});

watch(activeIconTab, (newVal) => {
  console.log('activeIconTab changed to:', newVal);
  if (newVal === 3) {
    console.log('Tab 3 (Children) is now active');
    console.log('formData.children:', formData.value.children);
  }
});
</script>

<style scoped>
.employees-container {
  padding: 1.5rem;
  background: #f8fafc;
  min-height: 100vh;
}

.header {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.title-section {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.title-section h1 {
  margin: 0;
  font-size: 1.75rem;
  color: #1e293b;
}

.subtitle {
  margin: 0.25rem 0 0 0;
  color: #64748b;
  font-size: 0.875rem;
}

.add-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  background: #6366f1;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1rem;
  transition: all 0.2s;
}

.add-btn:hover {
  background: #4f46e5;
  transform: translateY(-1px);
}

.table-container {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.simple-table {
  width: 100%;
  border-collapse: collapse;
}

.simple-table thead {
  background: #f1f5f9;
}

.simple-table th {
  padding: 1rem;
  text-align: left;
  font-weight: 600;
  color: #475569;
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.simple-table td {
  padding: 1rem;
  border-bottom: 1px solid #e2e8f0;
}

.photo-cell {
  width: 48px;
  height: 48px;
}

.photo-cell img {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  object-fit: cover;
}

.photo-placeholder {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: #e2e8f0;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #94a3b8;
  font-size: 1.5rem;
}

.name-cell .name-en {
  font-weight: 600;
  color: #1e293b;
}

.name-cell .name-kh {
  font-size: 0.875rem;
  color: #64748b;
  margin-top: 0.25rem;
}

.status-badge {
  padding: 0.375rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
}

.status-badge.active {
  background: #d1fae5;
  color: #065f46;
}

.action-buttons {
  display: flex;
  gap: 0.5rem;
}

.btn-icon {
  padding: 0.5rem;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s;
  background: transparent;
}

.btn-icon.view {
  color: #0288D1;
}

.btn-icon.view:hover {
  background: #e0f2fe;
}

.btn-icon.edit {
  color: #6366f1;
}

.btn-icon.edit:hover {
  background: #eef2ff;
}

.btn-icon.delete {
  color: #ef4444;
}

.btn-icon.delete:hover {
  background: #fee2e2;
}

.empty-state {
  text-align: center;
  padding: 3rem;
  color: #94a3b8;
}

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 0.2s;
}

.modal-content-large {
  background: white;
  border-radius: 16px;
  padding: 2rem;
  max-width: calc(100vw - 320px);
  width: 95%;
  max-height: 90vh;
  overflow-y: auto;
  animation: slideUp 0.3s;
  border: none;
  margin-left: 280px;
  margin-right: auto;
}

.modal-content-small {
  background: white;
  border-radius: 16px;
  padding: 2rem;
  max-width: 450px;
  width: 90%;
  animation: slideUp 0.3s;
}

.modal-content-large h3,
.modal-content-small h3 {
  margin: 0 0 1.5rem 0;
  font-family: 'Noto Serif Khmer', serif;
  font-size: 18px;
  color: #1e293b;
}

.top-icon-tabs {
  display: flex;
  justify-content: center;
  gap: 3rem;
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid #e2e8f0;
}

.icon-tab {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
  transition: all 0.2s;
}

.icon-circle {
  width: 70px;
  height: 70px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f1f5f9;
  color: #64748b;
  font-size: 1.75rem;
  transition: all 0.3s;
}

.icon-tab.active .icon-circle {
  background: #6366f1;
  color: white;
  transform: scale(1.1);
  box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
}

.icon-label {
  font-family: 'Noto Serif Khmer', serif;
  font-size: 18px;
  color: #64748b;
  text-align: center;
  max-width: 120px;
}

.icon-tab.active .icon-label {
  font-family: 'Noto Serif Khmer', serif;
  color: #6366f1;
  font-weight: 600;
}

.progress-section {
  margin-bottom: 2rem;
}

.progress-bar-container {
  background: #e2e8f0;
  height: 8px;
  border-radius: 9999px;
  overflow: hidden;
  margin-bottom: 0.5rem;
}

.progress-bar {
  background: linear-gradient(90deg, #6366f1, #8b5cf6);
  height: 100%;
  transition: width 0.3s;
  border-radius: 9999px;
}

.progress-text {
  font-size: 0.875rem;
  color: #6366f1;
  font-weight: 600;
}

.form-content {
  margin-bottom: 2rem;
}

.general-info-layout {
  display: flex;
  gap: 2rem;
  margin-bottom: 2rem;
  padding-bottom: 2rem;
  border-bottom: 2px solid #e2e8f0;
}

.photo-upload-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  flex-shrink: 0;
}

.general-info-fields {
  flex: 1;
}

.general-info-fields .form-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin-bottom: 1rem;
}

.photo-preview {
  width: 180px;
  height: 200px;
  border: 2px solid #e2e8f0;
  border-radius: 8px;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f8fafc;
}

.photo-preview img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.photo-placeholder {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f1f5f9;
  color: #cbd5e1;
  font-size: 4rem;
}

.photo-buttons {
  display: flex;
  flex-direction: row;
  gap: 1.5rem;
  justify-content: center;
}

.btn-photo {
  padding: 0.625rem 1.25rem;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-family: 'Siemreap', sans-serif;
  font-size: 12px;
  transition: all 0.2s;
}

.btn-photo.upload {
  background: #10b981;
  color: white;
}

.btn-photo.upload:hover {
  background: #059669;
}

.btn-photo.delete {
  background: #ef4444;
  color: white;
}

.btn-photo.delete:hover {
  background: #dc2626;
}

.form-row {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 1rem;
  margin-bottom: 1rem;
}

.form-block {
  padding: 1.5rem;
  margin-bottom: 2.5rem;
  border-radius: 12px;
  border: 2px solid;
  background: #ffffff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.general-info-block {
  border-color: #3b82f6;
}

.birthplace-block {
  border-color: #10b981;
}

.address-block {
  border-color: #f59e0b;
}

.emergency-block {
  border-color: #ef4444;
}

.form-section-header {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  margin-bottom: 1.5rem;
  padding-bottom: 0.75rem;
  border-bottom: 2px solid currentColor;
}

.form-section-header i {
  font-size: 1.5rem;
}

.general-info-block .form-section-header {
  color: #1e40af;
}

.birthplace-block .form-section-header {
  color: #047857;
}

.address-block .form-section-header {
  color: #d97706;
}

.emergency-block .form-section-header {
  color: #dc2626;
}

.subsection-title {
  font-family: 'Noto Serif Khmer', serif;
  font-size: 14px;
  font-weight: 600;
  color: #1f2937;
  margin-top: 1.5rem;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid #e5e7eb;
}

.form-section-header h4 {
  font-family: 'Noto Serif Khmer', serif;
  font-size: 16px;
  font-weight: 600;
  color: #1e40af;
  margin: 0;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.form-group.full-width {
  grid-column: 1 / -1;
}

.form-group label {
  font-family: 'Siemreap', sans-serif;
  font-weight: 600;
  color: #475569;
  font-size: 12px;
}

.required {
  color: #ef4444;
}

.form-group input,
.form-group select,
.form-group textarea {
  padding: 0.75rem;
  border: 1px solid #cbd5e1;
  border-radius: 8px;
  font-family: 'Siemreap', sans-serif;
  font-size: 12px;
  transition: all 0.2s;
}

.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus {
  outline: none;
  border-color: #6366f1;
  box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
}

.form-group textarea {
  resize: vertical;
  min-height: 80px;
}

.radio-group {
  display: flex;
  gap: 1.5rem;
  padding-top: 0.5rem;
}

.radio-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  font-family: 'Siemreap', sans-serif;
  font-size: 12px;
  color: #475569;
}

.radio-label input[type="radio"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
}

.checkbox-label {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  cursor: pointer;
  font-family: 'Siemreap', sans-serif;
  font-size: 13px;
  color: #1f2937;
  font-weight: 500;
}

.checkbox-label input[type="checkbox"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
}

.date-picker-group {
  display: flex;
  gap: 0.5rem;
}

.date-select {
  flex: 1;
  padding: 0.75rem;
  border: 1px solid #cbd5e1;
  border-radius: 8px;
  font-family: 'Siemreap', sans-serif;
  font-size: 12px;
}

.form-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-top: 1.5rem;
  border-top: 1px solid #e2e8f0;
}

.form-actions-left {
  display: flex;
  gap: 1rem;
}

.form-actions-right {
  display: flex;
  gap: 1rem;
}

.btn-cancel,
.btn-submit,
.btn-next,
.btn-back,
.btn-delete {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-family: 'Siemreap', sans-serif;
  font-size: 12px;
  transition: all 0.2s;
}

.btn-back {
  background: #64748b;
  color: white;
}

.btn-back:hover {
  background: #475569;
}

.btn-cancel {
  background: #f1f5f9;
  color: #475569;
}

.btn-cancel:hover {
  background: #e2e8f0;
}

.btn-next {
  background: #0ea5e9;
  color: white;
}

.btn-next:hover {
  background: #0284c7;
}

.btn-submit {
  background: #6366f1;
  color: white;
}

.btn-submit:hover {
  background: #4f46e5;
}

.btn-delete {
  background: #ef4444;
  color: white;
}

.btn-delete:hover {
  background: #dc2626;
}

.confirmation-content {
  text-align: center;
  padding: 2rem 0;
}

.confirmation-content p {
  margin-top: 1rem;
  color: #475569;
}

.dialog-footer {
  display: flex;
  gap: 1rem;
  justify-content: flex-end;
  margin-top: 2rem;
  padding-top: 1.5rem;
  border-top: 1px solid #e2e8f0;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Children Table Styles */
.btn-add-child {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 8px;
  background: #10b981;
  color: white;
  cursor: pointer;
  font-family: 'Siemreap', sans-serif;
  font-size: 13px;
  margin-bottom: 1.5rem;
  transition: all 0.2s;
}

.btn-add-child:hover {
  background: #059669;
}

.children-table-container {
  overflow-x: auto;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
}

.children-table {
  width: 100%;
  border-collapse: collapse;
  font-family: 'Siemreap', sans-serif;
  font-size: 12px;
}

.children-table thead {
  background: #f8fafc;
}

.children-table th {
  padding: 0.875rem;
  text-align: left;
  font-weight: 600;
  color: #1f2937;
  border-bottom: 2px solid #e5e7eb;
  white-space: nowrap;
}

.children-table td {
  padding: 0.75rem;
  border-bottom: 1px solid #e5e7eb;
}

.children-table tbody tr:hover {
  background: #f9fafb;
}

.table-input,
.table-select {
  width: 100%;
  padding: 0.5rem;
  border: 1px solid #cbd5e1;
  border-radius: 6px;
  font-family: 'Siemreap', sans-serif;
  font-size: 12px;
  min-width: 120px;
}

.table-input:focus,
.table-select:focus {
  outline: none;
  border-color: #6366f1;
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
}

.btn-delete-child {
  padding: 0.5rem;
  border: none;
  border-radius: 6px;
  background: #ef4444;
  color: white;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-delete-child:hover {
  background: #dc2626;
}

.empty-children {
  text-align: center;
  padding: 3rem;
  color: #6b7280;
  font-family: 'Siemreap', sans-serif;
  font-size: 13px;
  background: #f9fafb;
  border-radius: 8px;
  border: 2px dashed #e5e7eb;
}
